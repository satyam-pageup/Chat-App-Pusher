import { AfterViewInit, Component, ElementRef, HostListener, OnDestroy, OnInit, QueryList, ViewChild, ViewChildren, viewChild } from '@angular/core';
import { IResponseG, GetMessageI } from '../../../response/responseG.response';
import { ChatBoxI, IGetMessage, MessageI, MessageNewI } from '../../../model/chat.model';
import { GetMessagePaginationI } from '../../../model/pagination.model';
import { ComponentBase } from '../../../shared/class/ComponentBase.class';
import { UtilService } from '../../../../services/util.service';
import { APIRoutes } from '../../../shared/constants/apiRoutes.constant';
import { FirebaseService } from '../../../../services/firebase.service';
import { CGetAllUser } from '../../../response/user.response';
import { ConfirmationComponent } from '../../../shared/component/confirmation/confirmation.component';
import { FormControl } from '@angular/forms';
import { ConvertToBase } from '../../../shared/class/ConvertoBase64.class';
import { PusherService } from '../../../../services/pusher.service';
import { DatePipe } from '@angular/common';
import { environment } from '../../../../environments/environment';
import { IMedia, IUpdateChatList } from '../../../model/util.model';
import { Channel } from 'pusher-js';
import { debounceTime } from 'rxjs/operators';
import { Observable, Subject, Subscription } from 'rxjs';
import { HttpHeaders } from '@angular/common/http';
import { HeaderOption } from '../../../model/headerOption.model';

@Component({
  selector: 'app-chat-box',
  templateUrl: './chat-box.component.html',
  styleUrl: './chat-box.component.scss'
})
export class ChatBoxComponent extends ComponentBase implements OnInit, AfterViewInit, OnDestroy {
  @ViewChild(ConfirmationComponent) ConfirmationComponentObj !: ConfirmationComponent;
  @ViewChild('scrollframe', { static: false }) scrollFrame!: ElementRef;
  @ViewChildren('item') itemElements!: QueryList<any>;
  @ViewChild("fileDropRef", { static: false }) fileDropEl!: ElementRef;

  private ConvertToBaseobj = new ConvertToBase();
  private scrollContainer: any;
  public isScrollToBottom: boolean = true;
  public isSendMsg: boolean = false
  public Name: string = "";
  public isSearchedUserChat: boolean = false;
  public searchedUserChat: CGetAllUser = new CGetAllUser();
  public preScrollH: number = 0;
  private options: GetMessagePaginationI = {
    isPagination: true,
    index: 0,
    take: 20,
    search: ""
  }
  public isFirstTime: boolean = true;
  public messageList: IGetMessage[] = [];
  public recevierId: number = -1;
  public message: string = '';
  private receiverStystemToken: string = '';
  public userDetail: ChatBoxI = {
    lastMessage: '',
    lastMessageDate: '',
    isSeen: false,
    newMessages: 0,
    recieverId: 0,
    recieverName: '',
    lastActive: '',
    isGroup: false
  };
  // for media and document uplaod
  public documentFormControl: FormControl = new FormControl(null);
  public mediaFormControl: FormControl = new FormControl(null);
  public selectedDocument: string = "";
  public selectedMedia: string = "";
  public selectedFileName: string = "";
  public inputType: string = "text";
  public isShowFiletypeInput: boolean = false;
  // public mediaBase64Array: string[] = [];
  public mediaBase64Array: IMedia[] = [];
  public staticPdfImage: string = "data:image/png;base64,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";

  public showChatMessages: boolean = false;
  public showEmojiPicker: boolean = false;
  public userBlockState: string = '';
  public isSenderTyping: boolean = false;
  public isReceiverTyping: boolean = false;
  private channel!: Channel;
  public isCall: boolean = true;
  public isUserOnline: boolean = false;

  private typingSubject = new Subject<string>();
  private typingSubscription: Subscription | undefined;


  constructor(public _utilService: UtilService, private firebaseService: FirebaseService,
    private elementRef: ElementRef, private _pusherService: PusherService, private _datePipe: DatePipe) {
    super();
    this.isFirstTime = true;
    this.isSearchedUserChat = false;
    this.subscribeChannelByName("typing-channel");
    _utilService.EMarkMessageRead.subscribe(() => {
      this.messageList.forEach((message) => {
        message.status = 4;
      })
    })
  }

  ngOnInit(): void {
    this.subcritpionF();
    this.typingSubscription = this.typingSubject.pipe(
      debounceTime(1000)
    ).subscribe((res) => {
      this.sendTypingStatus(false);
      this.isCall = true;
    });

    this._pusherService.onlineUserChannel.bind('online-user-event', (data: { response: string }) => {
      const resceivedID: number = parseInt(data.response.split('-')[0]);
      if (resceivedID == this._utilService.loggedInUserId) {
        if (data.response == `${this._utilService.loggedInUserId}-offline`) {
          this._pusherService.onlineUserF(resceivedID, true);
        }
      }
      else if (resceivedID == this._utilService.receiverId) {
        if (data.response == `${this._utilService.receiverId}-online`) {
          this.isUserOnline = true;
          this.messageList.forEach(
            (message) => {
              if (message.status == 2) {
                message.status = 3
              }
            }
          )
        }
        else if (data.response == `${this._utilService.receiverId}-offline`) {
          this.isUserOnline = false;
        }
      }
    });
  }

  private subscribeChannelByName(channelName: string) {
    this.channel = this._pusherService.subscribeToChannel(channelName);
    this.channel.bind('typing-event', (data: any) => {
      if (data.receiverId == this._utilService.loggedInUserId && data.typingUserId == this.recevierId) {
        this.isReceiverTyping = data.status;
      }
    });
  }

  public sendTypingStatus(isTyping: boolean) {
    this._pusherService.sendTypingStatus(this.recevierId, isTyping);
  }

  public onTyping() {
    this.typingSubject.next(this.message);
    if (this.isCall) {
      this.sendTypingStatus(true);
      this.isCall = false;
    }
  }


  public ngAfterViewInit() {
    this.scrollContainer = this.scrollFrame.nativeElement;
    this.itemElements.changes.subscribe(_ => this.onItemElementsChanged());
  }

  public onMediaSelect(event: any) {
    event.stopPropagation();
    this.mediaBase64Array = [];
    const file: File[] = event.target.files;
    if (file.length > 0) {
      for (let i = 0; i < file.length; i++) {
        const fName: string = file[i].name;
        this.ConvertToBaseobj.imageObjectToBase64Promise(file[i]).then(
          (res: string) => {
            const mediaBase64Data: IMedia = {
              base64: res,
              name: fName
            }
            this.mediaBase64Array.push(mediaBase64Data);
            event.target.value = null;
          }
        )
      }
      console.log(this.mediaBase64Array);
    }
    this.selectedDocument = "";
  }

  public removeMediaFromArray(index: number) {
    this.mediaBase64Array.splice(index, 1);
  }

  public onFileDropped(event: any) {
    this.selectedFileName = event.name;
    const fileType: string = event.type;
    if (fileType.startsWith('image')) {
      this.ConvertToBaseobj.imageObjectToBase64Promise(event).then(
        (res) => {
          this.selectedMedia = res;
        }
      )
    }
    else if (fileType.startsWith('application/pdf')) {
      this.ConvertToBaseobj.pdfObjectToBase64Promise(event).then(
        (res) => {
          this.selectedDocument = res;
          this.selectedMedia = this.staticPdfImage;
        }
      )
    }
  }

  public onLongPress(event: any) {
    console.log(event);
  }

  public onDocumentSelect(event: any) {
    this.selectedMedia = "";
    this.ConvertToBaseobj.pdfToBase64Promise(event).then(
      (res: string) => {
        this.selectedDocument = res;
        this.selectedMedia = this.staticPdfImage;
        this.selectedFileName = event.target.files[0].name;
      }
    )
  }

  public onEnterKeyDown(event: any, index: number) {
    event.preventDefault();
    this.sendMessage(index);
  }

  public sendMessage(index: number) {
    this.showEmojiPicker = false;
    this.isScrollToBottom = true;
    this.isSendMsg = true;
    if (this.message.trim().length > 0) {
      const data: { message: string, isGroup: boolean } = {
        message: this.message.trim(),
        isGroup: this._utilService.isGroup
      }
      const rMsg: IGetMessage = {
        id: -1,
        message: data.message,
        name: this._utilService.loggedInUserName,
        userType: "user",
        senderId: this._utilService.loggedInUserId,
        status: 1,
        receiverId: this._utilService.receiverId,
        messageDate: (this._datePipe.transform(new Date(), 'medium', 'UTC') as string)
      }
      this.messageList.push(rMsg);

      this._pusherService.triggerEvent('active-channel', 'active-event', data.message);

      let myNewHeader: HttpHeaders = new HttpHeaders({
        isSendNotification: 'true',
        isSilentCall: 'true'
      })
      const hitUrl: string = `${environment.baseUrl}${APIRoutes.sendMessage(this.recevierId)}`
      this._httpClient.post<IResponseG<IGetMessage>>(hitUrl, data, { headers: myNewHeader }).subscribe({
        next: (res) => {
          this._utilService.EUserPresenceCheckInChatList.emit(res.data);
          this.messageList[index] = res.data;

          if (this.isUserOnline) {
            this.messageList[index].status = 2;
          }

          if (this.isUserOnline) {
            this.messageList[index].status = (this._utilService.activeUserArray.includes(`${this.recevierId}-${this._utilService.loggedInUserId}-active`) ? 4 : 3);
          }

          this.isScrollToBottom = true;

          this.firebaseService.sendNotification({ receiverSystemToken: this.receiverStystemToken, title: "WhatsApp", body: data.message }, this._utilService.loggedInUserId);
        },
        error: (err) => {
          this.messageList[index].status = 5;
          console.log(err);
        }
      })
      this.message = '';
    }
  }

  public onScrollUp(event: Event) {
    const scrolltop = this.scrollFrame.nativeElement.scrollTop;
    if (scrolltop == 0 && !this.isSearchedUserChat) {
      this.options.index++;
      this.getChatById();
    }
  }

  public autoGrowTextZone(e: any) {
    e.target.style.height = "0";
    e.target.style.height = (e.target.scrollHeight) + "px";
  }

  public deleteMessage(id: number, index: number) {
    this.ConfirmationComponentObj.openModal("Delete", "Do you want to delete it ?").then(
      (res: boolean) => {
        if (res) {
          if (id != -1) {
            const msgtoDlt: { ids: number[], recieverId: number } = {
              ids: [id],
              recieverId: this.recevierId
            }

            this.deleteAPICallPromise<{ ids: number[] }, IResponseG<null>>(APIRoutes.deleteMessage, msgtoDlt, this.headerOption).then(
              (res) => {
                this.messageList.splice(index, 1);
                this.isScrollToBottom = true;
                this._toastreService.success("Message deleted successfully");
              }
            )
          }
          else {
            this.messageList.splice(index, 1);
            this.isScrollToBottom = true;
            this._toastreService.success("Message deleted successfully");
          }
        }
      }
    )
  }

  public blockUser() {
    if (this.userBlockState == "Block") {
      let message = "Blocked contacts will no longer be able to send you message";
      this.ConfirmationComponentObj.openModal(`${this.userBlockState}`, message).then(
        (res: boolean) => {
          if (res) {
            this.postAPICallPromise<number, IResponseG<null>>(APIRoutes.blockUser(this.recevierId), this.recevierId, this.headerOption).then(
              (res) => {
                if (res.status) {
                  this.userBlockState = 'Unblock';
                  this._toastreService.success(res.message);
                }
                else {
                  this._toastreService.error(res.message)
                }
              }
            )
          }
        }
      )
    }
    else {
      let message = "Are you sure you want to unblock user ?";
      this.ConfirmationComponentObj.openModal(`${this.userBlockState}`, message).then(
        (res: boolean) => {
          if (res) {
            this.postAPICallPromise<number, IResponseG<null>>(APIRoutes.unBlockUser(this.recevierId), this.recevierId, this.headerOption).then(
              (res) => {
                if (res.status) {
                  this.userBlockState = 'Block';
                  this._toastreService.success(res.message);
                }
                else {
                  this._toastreService.error(res.message)
                }
              }
            )
          }
        }
      )
    }
  }

  public toggleEmojiPicker() {
    this.showEmojiPicker = !this.showEmojiPicker;
  }

  public addEmoji(event: any) {
    const { message } = this;
    const text = `${message}${event.emoji.native}`;
    this.message = text;
  }

  @HostListener('document:click', ['$event'])
  public handleClick(event: MouseEvent) {
    const clickedElement = event.target as HTMLElement;
    const emojiIcon = this.elementRef.nativeElement.querySelector('.bx-smile');
    const emojiContainer = this.elementRef.nativeElement.querySelector('.emoji-container');
    if (!emojiIcon || (!emojiIcon.contains(clickedElement) && (!emojiContainer || !emojiContainer.contains(clickedElement)))) {
      this.showEmojiPicker = false;
    }
  }

  private subcritpionF() {
    this._utilService.EChatClicked.subscribe(
      (id: number) => {
        this.recevierId = id;
        this.getChatByIdListen(id);
        if (id > -1)
          this.showChatMessages = true;
        else
          this.showChatMessages = false;
      }
    )

    this.userChatEmitterSubcribedF();

    this._pusherService.messageReceivedE.subscribe((msg: IGetMessage) => {
      if (msg.senderId == this._utilService.currentOpenedChat) {
        this.isScrollToBottom = true;
        this.messageList.push(msg);
      }
      else {
        if (msg.receiverId == this._utilService.loggedInUserId) {
          this._utilService.EUserPresenceCheckInChatList.emit(msg);
        }
      }
    })
  }

  private userChatEmitterSubcribedF() {
    this._utilService.EUserChat.subscribe((res) => {
      this.isFirstTime = false;
      this.showChatMessages = false;
      this.isChatLoaderActive = true;
      this.message = "";
      this.recevierId = res.id;
      this._utilService.currentOpenedChat = res.id;
      this.options.index = 0;
      this.Name = res.name;

      this.isUserOnline = this._utilService.onlineUserArray.includes(this.recevierId);

      this.postAPICallPromise<GetMessagePaginationI, GetMessageI<IGetMessage[]>>(APIRoutes.getMessageById(res.id, this._utilService.isGroup), this.options, this.headerOption).then(
        (res) => {
          this.showChatMessages = true;
          this.messageList = res.data.data;
          this.receiverStystemToken = res.data.systemToken;
          this.isScrollToBottom = true;
          if (res.data.isBlockedUser) {
            this.userBlockState = "Unblock"
          }
          else {
            this.userBlockState = "Block"
          }
          this.showChatMessages = true;
        }
      )
    })
  }

  private getChatById() {
    if (this._utilService.currentOpenedChat != -1) {
      this.postAPICallPromise<GetMessagePaginationI, GetMessageI<IGetMessage[]>>(APIRoutes.getMessageById(this._utilService.currentOpenedChat, false), this.options, this.headerOption).then(
        (res) => {
          if (this.isSendMsg) {
            this.messageList = [];
            this.isSendMsg = false;
          }
          for (let i = res.data.data.length - 1; i > -1; i--) {
            const rMsg: IGetMessage = { ...(res.data.data[i]) }
            this.messageList.unshift(rMsg);
          }
          this.receiverStystemToken = res.data.systemToken;
        }
      )
    }
  }

  private onItemElementsChanged(): void {
    if (this.isScrollToBottom) {
      this.scrollToBottom();
      this.isScrollToBottom = false;
    }
    else {
      this.scrollToHalf();
    }
  }

  private scrollToBottom(): void {
    this.scrollContainer.scroll({
      top: this.scrollContainer.scrollHeight,
      left: 0,
    });
    this.preScrollH = this.scrollContainer.scrollHeight;
  }

  private scrollToHalf(): void {
    this.scrollContainer.scroll({
      top: this.scrollContainer.scrollHeight - this.preScrollH,
      left: 0,
    });
    this.preScrollH = this.scrollContainer.scrollHeight;
  }

  private getChatByIdListen(id: number) {
    this.options.index = 0;
    if (this._utilService.currentOpenedChat != -1) {
      this.postAPICallPromise<GetMessagePaginationI, GetMessageI<IGetMessage[]>>(APIRoutes.getMessageById(id, false), this.options, this.headerOption).then(
        (res) => {
          this.messageList = res.data.data;

          this.receiverStystemToken = res.data.systemToken;
          this.isScrollToBottom = true;
          if (res.data.isBlockedUser) {
            this.userBlockState = "Unblock"
          }
          else {
            this.userBlockState = "Block"
          }
        }
      )
    }
  }
  @HostListener('window:beforeunload', ['$event'])
  onBeforeUnload(event: Event) {
    // Call your API method here
    // this.yourApiCall();
    this._pusherService.onlineUserF(this._utilService.loggedInUserId, false);
  }

  ngOnDestroy(): void {
    this._pusherService.onlineUserF(this._utilService.loggedInUserId, false);
    if (this.typingSubscription) {
      this.typingSubscription.unsubscribe();
    }
  }

}



